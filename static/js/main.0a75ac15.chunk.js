(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{44:function(e,t,n){e.exports=n(84)},77:function(e,t){},84:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(40),r=n.n(o),s=n(4),i=n(7),l=n(6),m=n(41),u=n.n(m),d=Object(a.createContext)({}),f=function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(a.useState)(e),n=Object(s.a)(t,2),c=n[0],o=n[1],r=function(e){o(e.target.value)};return{input:c,setInput:o,onInputChange:r}}(),t=e.input,n=e.onInputChange,o=Object(a.useContext)(d).io;return c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"control"},c.a.createElement("input",{className:"input",placeholder:"Write your nickname",onChange:n,value:t})),c.a.createElement("div",{className:"control"},c.a.createElement("button",{className:"button is-info",onClick:function(){o.emit("Game::sendNickname",t)}},"Send")))},g=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),o=n[0],r=n[1],l=Object(a.useState)(!1),m=Object(s.a)(l,2),u=m[0],f=m[1],g=Object(a.useContext)(d),E=g.io,h=g.player;Object(a.useEffect)((function(){E.on("".concat(e.game,"::gameStart"),(function(){r(!0)})),E.emit("Game::join",e.game),E.on("".concat(e.game,"::winPoint"),(function(){e.onWinPoint("You win a point !")})),E.on("".concat(e.game,"::losePoint"),(function(t){e.onLosePoint("You lose this round :/ ".concat(t.playerName," win a point."))})),E.on("".concat(e.game,"::gameEnd"),(function(t){var n="win"===t;e.onGameEnd(n?"You win !":"You lose",n),f(!0)})),E.on("".concat(e.game,"::gameForceEnd"),(function(){e.onGameForceEnd("Game stopped ! Due to player disconnection"),f(!0)}))}));var v;return o?c.a.createElement("div",{className:"box"},(v=e.message)?c.a.createElement("div",{className:"notification is-".concat(v.isSuccess?"success":"danger")},v.msg):c.a.createElement(c.a.Fragment,null),!u&&e.children,c.a.createElement("h5",null,"You have ",null===h||void 0===h?void 0:h.points," points"),u&&c.a.createElement(c.a.Fragment,null,c.a.createElement("br",null),c.a.createElement(i.b,{to:"/"},"Back to games"))):c.a.createElement(b,null)},E=function(e){return c.a.createElement("div",{className:"card"},c.a.createElement("header",{className:"card-header"},c.a.createElement("p",{className:"card-header-title"},e.title)),c.a.createElement("div",{className:"card-content"},c.a.createElement("div",{className:"content"},e.desc)),c.a.createElement("footer",{className:"card-footer"},c.a.createElement(i.b,{to:e.pathGame,className:"card-footer-item"},"Play")))},b=function(){var e=Object(a.useContext)(d).player;return c.a.createElement("div",{className:"box"},c.a.createElement("h1",{className:"title is-1"},"Hello ",e.nickname," !"),c.a.createElement("h3",{className:"title is-3"},"Waiting for another player..."),c.a.createElement("progress",{className:"progress is-large is-info",max:"100"}))},h=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],o=t[1],r=function(){var e=Object(a.useState)(),t=Object(s.a)(e,2),n=t[0],c=t[1];return{message:n,setSuccessMsg:function(e){c({msg:e,isSuccess:!0})},setErrorMsg:function(e){c({msg:e,isSuccess:!1})},setMessage:c}}(),i=r.message,l=r.setErrorMsg,m=r.setSuccessMsg,u=r.setMessage,f=Object(a.useContext)(d),E=f.io,b=f.player,h=function(e){m(e),o("")},v=function(e){l(e),o("")};Object(a.useEffect)((function(){E.once("magicnumber::numberIsLess",(function(){l("Number is less than ".concat(n,"!"))})),E.once("magicnumber::numberIsMore",(function(){l("Number is more than ".concat(n,"!"))}))}),[n]);return c.a.createElement(g,{game:"magicnumber",message:i,onWinPoint:h,onWin:h,onLosePoint:v,onLose:v,onGameEnd:function(e,t){u({msg:e,isSuccess:t}),o("")},onGameForceEnd:v},c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"control"},c.a.createElement("input",{className:"input",placeholder:"Guess the number (from 0 to 1337)",onChange:function(e){o(e.target.value)},value:"".concat(n)})),c.a.createElement("div",{className:"control"},c.a.createElement("button",{className:"button is-info",onClick:function(){n&&E.emit("magicnumber::tryNumber",{id:b.id,number:parseInt(n)})}},"Send"))))},v=function(){return c.a.createElement("div",{className:"columns"},c.a.createElement("div",{className:"column"},c.a.createElement(E,{title:"MagicNumber",desc:"You have to find the random MagicNumber generated, by trying some numbers.",pathGame:"/magicnumber"})),c.a.createElement("div",{className:"column"},c.a.createElement(E,{title:"MagicNumber",desc:"You have to find the random MagicNumber generated, by trying some numbers.",pathGame:"/magicnumber"})),c.a.createElement("div",{className:"column"},c.a.createElement(E,{title:"MagicNumber",desc:"You have to find the random MagicNumber generated, by trying some numbers.",pathGame:"/magicnumber"})))},p=u()("https://crosspwagame.herokuapp.com/"),N=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function w(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(c.a.createElement((function(){var e=Object(a.useState)(),t=Object(s.a)(e,2),n=t[0],o=t[1];Object(a.useEffect)((function(){p.on("Game::playerInfo",(function(e){console.log("On playerInfo",e),r(e)}))}),[]);var r=function(e){o(e)};return c.a.createElement(i.a,{basename:"/CrossPWAGame"},c.a.createElement(d.Provider,{value:{io:p,player:n,updatePlayer:r}},c.a.createElement("section",{className:"hero is-fullheight is-light"},c.a.createElement("div",{className:"hero-head"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"tabs is-centered"},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(i.b,{to:"/"},"PWA Games")))))),c.a.createElement("div",{className:"hero-body"},c.a.createElement("div",{className:"container"},c.a.createElement("header",{className:"bd-index-header"},n?c.a.createElement(l.c,null,c.a.createElement(l.a,{exact:!0,path:"/"},c.a.createElement(v,null)),c.a.createElement(l.a,{path:"/magicnumber"},c.a.createElement(h,null))):c.a.createElement(f,null)))),c.a.createElement("div",{className:"hero-foot"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"tabs is-centered"},c.a.createElement("ul",null,c.a.createElement("li",null,"Let's Rock!"))))))))}),null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/CrossPWAGame",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/CrossPWAGame","/service-worker.js");N?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):w(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):w(t,e)}))}}()}},[[44,1,2]]]);
//# sourceMappingURL=main.0a75ac15.chunk.js.map