(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{44:function(e,a,t){e.exports=t(84)},77:function(e,a){},84:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),o=t(40),r=t.n(o),s=t(5),i=Object(n.createContext)({}),l=t(41),m=t.n(l),u=t(11),d=t(6),f=function(){var e=Object(n.useContext)(i).player;return c.a.createElement("div",{className:"box"},c.a.createElement("h1",{className:"title is-1"},"Hello ",e.nickname," !"),c.a.createElement("h3",{className:"title is-3"},"Waiting for another player..."),c.a.createElement("progress",{className:"progress is-large is-info",max:"100"}))},g=function(){var e=Object(n.useState)(!1),a=Object(s.a)(e,2),t=a[0],o=a[1],r=Object(n.useState)(""),l=Object(s.a)(r,2),m=l[0],u=l[1],d=Object(n.useState)(),g=Object(s.a)(d,2),b=g[0],h=g[1],E=Object(n.useState)(!1),v=Object(s.a)(E,2),p=v[0],N=v[1],w=Object(n.useContext)(i),y=w.io,j=w.player;Object(n.useEffect)((function(){y.on("magicnumber::gameStart",(function(){console.log("game started"),o(!0)})),y.emit("Game::join","magicnumber"),y.on("magicnumber::winPoint",(function(){h({msg:"You win a point !",isSuccess:!0}),u("")})),y.on("magicnumber::losePoint",(function(e){h({msg:"You lose this round :/ ".concat(e.playerName," win a point."),isSuccess:!1}),u("")})),y.on("magicnumber::gameEnd",(function(e){h("win"===e?{msg:"You win !",isSuccess:!0}:{msg:"You lose !",isSuccess:!1}),u(""),N(!0)})),y.on("magicnumber::gameForceEnd",(function(){h({msg:"Game stopped ! Due to player disconnection",isSuccess:!1}),u(""),N(!0)}))}),[]),Object(n.useEffect)((function(){y.once("magicnumber::numberIsLess",(function(){h({msg:"Number is less than ".concat(m,"!"),isSuccess:!1})})),y.once("magicnumber::numberIsMore",(function(){h({msg:"Number is more than ".concat(m,"!"),isSuccess:!1})}))}),[m,y]);return t?c.a.createElement("div",{className:"box"},function(e){return e?c.a.createElement("div",{className:"notification is-".concat(e.isSuccess?"success":"danger")},e.msg):c.a.createElement(c.a.Fragment,null)}(b),!p&&c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"control"},c.a.createElement("input",{className:"input",placeholder:"Guess the number (from 0 to 1337)",onChange:function(e){u(e.target.value)},value:"".concat(m)})),c.a.createElement("div",{className:"control"},c.a.createElement("button",{className:"button is-info",onClick:function(){console.log(m),m&&y.emit("magicnumber::tryNumber",{id:j.id,number:parseInt(m)})}},"Send"))),c.a.createElement("h5",null,"You have ",null===j||void 0===j?void 0:j.points," points")):c.a.createElement(f,null)},b=function(e){return c.a.createElement("div",{className:"card"},c.a.createElement("header",{className:"card-header"},c.a.createElement("p",{className:"card-header-title"},e.title)),c.a.createElement("div",{className:"card-content"},c.a.createElement("div",{className:"content"},e.desc),c.a.createElement("footer",{className:"card-footer"},c.a.createElement(u.b,{to:e.pathGame,className:"card-footer-item"},"Play"))))},h=function(){return c.a.createElement("div",{className:"columns"},c.a.createElement("div",{className:"column"},c.a.createElement(b,{title:"MagicNumber",desc:"You have to find the random MagicNumber generated, by trying some numbers.",pathGame:"/magicnumber"})),c.a.createElement("div",{className:"column"},c.a.createElement(b,{title:"MagicNumber",desc:"You have to find the random MagicNumber generated, by trying some numbers.",pathGame:"/magicnumber"})),c.a.createElement("div",{className:"column"},c.a.createElement(b,{title:"MagicNumber",desc:"You have to find the random MagicNumber generated, by trying some numbers.",pathGame:"/magicnumber"})))},E=function(e){var a=e.onChange,t=Object(n.useState)(""),o=Object(s.a)(t,2),r=o[0],i=o[1];return c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"control"},c.a.createElement("input",{className:"input",placeholder:"Write your nickname",onChange:function(e){i(e.target.value)},value:r})),c.a.createElement("div",{className:"control"},c.a.createElement("button",{className:"button is-info",onClick:function(){return a(r)}},"Send")))},v=m()("https://crosspwagame.herokuapp.com/"),p=function(){var e=Object(n.useState)(),a=Object(s.a)(e,2),t=a[0],o=a[1];Object(n.useEffect)((function(){v.on("Game::playerInfo",(function(e){console.log("On playerInfo",e),r(e)}))}),[]);var r=function(e){o(e)};return c.a.createElement(u.a,{basename:"/CrossPWAGame"},c.a.createElement(i.Provider,{value:{io:v,player:t,updatePlayer:r}},c.a.createElement("section",{className:"hero is-fullheight is-light"},c.a.createElement("div",{className:"hero-head"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"tabs is-centered"},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(u.b,{to:"/"},"PWA Games")))))),c.a.createElement("div",{className:"hero-body"},c.a.createElement("div",{className:"container"},c.a.createElement("header",{className:"bd-index-header"},t?c.a.createElement(d.c,null,c.a.createElement(d.a,{exact:!0,path:"/"},c.a.createElement(h,null)),c.a.createElement(d.a,{path:"/magicnumber"},c.a.createElement(g,null))):c.a.createElement(E,{onChange:function(e){v.emit("Game::sendNickname",e)}})))),c.a.createElement("div",{className:"hero-foot"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"tabs is-centered"},c.a.createElement("ul",null,c.a.createElement("li",null,"Let's Rock!"))))))))},N=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function w(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(c.a.createElement(p,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/CrossPWAGame",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("/CrossPWAGame","/service-worker.js");N?(!function(e,a){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):w(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):w(a,e)}))}}()}},[[44,1,2]]]);
//# sourceMappingURL=main.4423d8c4.chunk.js.map